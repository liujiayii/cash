(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c52675b"],{"10e1":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:function(t){e.formData={}}}},[i("el-form",{ref:"ruleForm",attrs:{model:e.formData,rules:e.rules,inline:!0,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogFormVisible2,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[e._l(e.accessList,function(t){return i("div",{key:t.parentIds},[i("el-divider",{attrs:{"content-position":"left"}},[i("el-checkbox-group",{model:{value:e.selectAccess.ids,callback:function(t){e.$set(e.selectAccess,"ids",t)},expression:"selectAccess.ids"}},[i("el-checkbox",{attrs:{label:t.parentIds}},[e._v(e._s(t.parent_names))])],1)],1),i("el-checkbox-group",{model:{value:e.selectAccess.ids,callback:function(t){e.$set(e.selectAccess,"ids",t)},expression:"selectAccess.ids"}},e._l(t.permissions,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n          "+e._s(t.name)+"\n        ")])}),1)],1)}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit2}},[e._v("确 定")])],1)],2),i("div",{staticClass:"top"},[i("el-form",{attrs:{inline:!0,model:e.searchForm,size:"small"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"输入角色查询",type:"text"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),i("el-form-item",[i("el-input",{attrs:{placeholder:"输入店铺查询",type:"text"},model:{value:e.searchForm.shopId,callback:function(t){e.$set(e.searchForm,"shopId",t)},expression:"searchForm.shopId"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fetch()}}},[e._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1),i("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新建")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"id",label:"编号"}}),i("el-table-column",{attrs:{prop:"name",label:"角色"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleAccess(t.row)}}},[e._v("权限")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),i("el-pagination",{attrs:{"current-page":e.pagination.current,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":e.fetch}})],1)},n=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("bd86"));i("7f7f");function o(e,t){var i=Object.keys(e);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(e)),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(i,!0).forEach(function(t){Object(r["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c={name:"Role",data:function(){return{tableData:[],pagination:{},loading:!1,searchForm:{},dialogFormVisible:!1,formData:{},rules:{newBid:[{required:!0,message:"请输入内容",trigger:"blur"}],bidState:[{required:!0,message:"请输入内容",trigger:"blur"}],businessType:[{required:!0,message:"请输入内容",trigger:"blur"}],name:[{required:!0,message:"请输入内容",trigger:"blur"}],lengthOfMaturity:[{required:!0,message:"请输入内容",trigger:"blur"}],money:[{required:!0,message:"请输入内容",trigger:"blur"}]},dialogFormVisible2:!1,accessList:JSON.parse(sessionStorage.getItem("access")),selectAccess:{ids:[],id:null}}},methods:{reset:function(){this.searchForm={},this.fetch()},handleEdit:function(e){this.formData=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0},handleAccess:function(e){var t=this;this.$ajax.post("/listRolePermissions.action",{roleId:e.id}).then(function(i){1===i.data.code&&(t.selectAccess={ids:i.data.data,id:e.id},t.dialogFormVisible2=!0)})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e)return t.$ajax.post(t.formData.id?"/updateRole.action":"/saveRole.action",{id:t.formData.id||"",name:t.formData.name}).then(function(e){1===e.data.code&&(t.dialogFormVisible=!1,t.$message.success(e.data.msg),t.fetch(t.pagination.current))}),!1})},submit2:function(){var e=this;this.$ajax.post("/updateOneRolePermission.action",{id:this.selectAccess.id,ids:this.selectAccess.ids.join(",")}).then(function(t){1===t.data.code&&(e.dialogFormVisible2=!1,e.$message.success(t.data.msg))})},fetch:function(e){var t=this;this.loading=!0,this.$ajax.post("/listRole.action",s({limit:10,page:e||1},this.searchForm)).then(function(i){if(1===i.data.code){var a=s({},t.pagination);a.total=i.data.count,a.current=e,t.loading=!1,t.tableData=i.data.data,t.pagination=a}})},handleDelete:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.post("/deleteRoleById.action",{id:e.id}).then(function(e){1===e.data.code&&(t.$message.success(e.data.msg),t.fetch(t.pagination.current))})}).catch(function(){t.$message.info("已取消")})}},mounted:function(){this.fetch()}},l=c,u=i("2877"),d=Object(u["a"])(l,a,n,!1,null,null,null);t["default"]=d.exports},"454f":function(e,t,i){i("46a7");var a=i("584a").Object;e.exports=function(e,t,i){return a.defineProperty(e,t,i)}},"456d":function(e,t,i){var a=i("4bf8"),n=i("0d58");i("5eda")("keys",function(){return function(e){return n(a(e))}})},"46a7":function(e,t,i){var a=i("63b6");a(a.S+a.F*!i("8e60"),"Object",{defineProperty:i("d9f6").f})},"5eda":function(e,t,i){var a=i("5ca1"),n=i("8378"),r=i("79e5");e.exports=function(e,t){var i=(n.Object||{})[e]||Object[e],o={};o[e]=t(i),a(a.S+a.F*r(function(){i(1)}),"Object",o)}},"85f2":function(e,t,i){e.exports=i("454f")},"8e6e":function(e,t,i){var a=i("5ca1"),n=i("990b"),r=i("6821"),o=i("11e9"),s=i("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(e){var t,i,a=r(e),c=o.f,l=n(a),u={},d=0;while(l.length>d)i=c(a,t=l[d++]),void 0!==i&&s(u,t,i);return u}})},"990b":function(e,t,i){var a=i("9093"),n=i("2621"),r=i("cb7c"),o=i("7726").Reflect;e.exports=o&&o.ownKeys||function(e){var t=a.f(r(e)),i=n.f;return i?t.concat(i(e)):t}},ac6a:function(e,t,i){for(var a=i("cadf"),n=i("0d58"),r=i("2aba"),o=i("7726"),s=i("32e9"),c=i("84f2"),l=i("2b4c"),u=l("iterator"),d=l("toStringTag"),f=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(m),b=0;b<p.length;b++){var g,h=p[b],v=m[h],y=o[h],x=y&&y.prototype;if(x&&(x[u]||s(x,u,f),x[d]||s(x,d,h),c[h]=f,v))for(g in a)x[g]||r(x,g,a[g],!0)}},bd86:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("85f2"),n=i.n(a);function r(e,t,i){return t in e?n()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},f1ae:function(e,t,i){"use strict";var a=i("86cc"),n=i("4630");e.exports=function(e,t,i){t in e?a.f(e,t,n(0,i)):e[t]=i}}}]);